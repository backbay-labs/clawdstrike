{{- if and .Values.hushd.enabled .Values.hushd.auth.enabled (not .Values.hushd.auth.existingSecret) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "clawdstrike.fullname" . }}-hushd
  namespace: {{ include "clawdstrike.namespace" . }}
  labels:
    {{- include "clawdstrike.componentLabels" (dict "ctx" . "component" "hushd") | nindent 4 }}
type: Opaque
stringData:
  CLAWDSTRIKE_API_KEY: {{ .Values.hushd.auth.apiKey | default "replace-me" | quote }}
  CLAWDSTRIKE_ADMIN_KEY: {{ .Values.hushd.auth.adminKey | default "replace-me" | quote }}
{{- end }}
