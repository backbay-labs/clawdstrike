# Nginx configuration for receipt viewer
# Serves receipt JSON files with proper CORS headers

server {
    listen 80;
    server_name localhost;

    # Receipts directory
    location /receipts/ {
        alias /usr/share/nginx/html/receipts/;

        # Enable directory listing
        autoindex on;
        autoindex_format json;

        # CORS headers
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods "GET, OPTIONS";
        add_header Access-Control-Allow-Headers "Content-Type";

        # JSON content type
        types {
            application/json json;
        }
    }

    # Health check endpoint
    location /health {
        access_log off;
        return 200 '{"status": "healthy"}';
        add_header Content-Type application/json;
    }

    # Root redirect
    location / {
        return 301 /receipts/;
    }
}
